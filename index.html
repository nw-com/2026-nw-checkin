<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>西北打卡系統</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- 設定提示（未填 Firebase / Maps 金鑰時顯示）-->
    <div id="setup-warning" class="setup-warning hidden">
      <div class="setup-card">
        <h2>請完成最後的設定步驟</h2>
        <p>
          系統偵測到您尚未設定 Firebase 或 Google Maps 的 API 金鑰。<br />
          這不是程式錯誤，而是必要的設定。基於安全考量，我無法為您產生金鑰，您必須親自完成此設定。<br />
          請打開 <code>app.js</code> 檔案，找到 <code>FIREBASE_CONFIG</code>，並依照註解指示填入金鑰。<br />
          詳細步驟請參考 <code>README.md</code> 檔案。
        </p>
      </div>
    </div>

    <!-- 登入頁（參照原站設計） -->
    <div id="login-view" class="login-view">
      <div class="login-card">
        <div class="brand">
          <div class="brand-icon" aria-hidden="true">
            <!-- 打卡系統圖形：簡化 SVG -->
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
              <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </div>
          <div class="brand-text">
            <div class="brand-title">西北打卡系統</div>
            <div class="brand-subtitle">請先登入以繼續</div>
          </div>
        </div>

        <div class="login-form">
          <label class="label">電子郵件</label>
          <input id="emailInput" type="email" class="input" placeholder="admin@nw-checkin.local" />
          <label class="label">密碼</label>
          <input id="passwordInput" type="password" class="input" placeholder="Admin2026!" />
          <div class="login-actions">
            <button id="emailSignIn" class="btn btn-primary" disabled>登入</button>
            <button id="initAdminBtn" class="btn">初始化管理員</button>
          </div>
          <p class="muted" style="margin-top:8px;">
            預設管理員：<code>admin@nw-checkin.local</code> / <code>Admin2026!</code>（登入後請至 Firebase 重設密碼）
          </p>
        </div>
      </div>
    </div>

    <!-- 主頁（登入後顯示） -->
    <div id="app-view" class="app-view hidden">
      <!-- 頁首：10% 高，固定頂部、最上層 -->
      <header class="app-header">
        <div class="header-left">
          <div class="header-icon" aria-hidden="true">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
              <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </div>
          <span class="system-name">西北打卡系統</span>
        </div>
        <div class="header-right">
          <span id="userName" class="user-name">未登入</span>
          <img id="userPhoto" class="user-photo" alt="使用者照片" />
        </div>
      </header>

      <!-- 頁中上：10% 高，固定於頁首下方、最上層 -->
      <div class="app-subheader">
        <div id="subTabs" class="subheader-tabs"></div>
      </div>

      <!-- 頁中：70% 高 -->
      <main class="app-main">
        <!-- 首頁分頁 -->
        <section id="homeSection" class="section">
          <div class="panel">
            <h3>首頁</h3>
            <p>這裡顯示統計、公告或快捷功能。</p>
          </div>
        </section>

        <!-- 打卡分頁 -->
        <section id="checkinSection" class="section hidden">
          <div class="panel">
            <h3>打卡</h3>
            <p id="checkinSubTitle" class="muted"></p>
            <p id="locationInfo" class="muted">定位中…</p>
            <button id="checkinBtn" class="btn btn-primary">打卡</button>
            <p id="checkinResult" class="muted"></p>
          </div>
        </section>

        <!-- 設定分頁 -->
        <section id="settingsSection" class="section hidden">
          <div class="panel">
            <h3>設定</h3>
            <p id="settingsSubTitle" class="muted"></p>
            <ul>
              <li>於 Firestore 的 <code>users/{uid}</code> 設定 <code>role</code> 權限。</li>
              <li>角色階層：系統管理員、管理層、高階主管、初階主管、行政、一般、勤務。</li>
            </ul>
          </div>
        </section>

        <!-- 幹部分頁 -->
        <section id="leaderSection" class="section hidden">
          <div class="panel">
            <h3>幹部</h3>
            <p id="leaderSubTitle" class="muted"></p>
            <p class="muted">此分頁的功能將在後續實作。</p>
          </div>
        </section>

        <!-- 管理分頁 -->
        <section id="manageSection" class="section hidden">
          <div class="panel">
            <h3>管理</h3>
            <p id="manageSubTitle" class="muted"></p>
            <p class="muted">此分頁的功能將在後續實作。</p>
          </div>
        </section>

        <!-- 功能分頁 -->
        <section id="featureSection" class="section hidden">
          <div class="panel">
            <h3>功能</h3>
            <p id="featureSubTitle" class="muted"></p>
            <p class="muted">此分頁的功能將在後續實作。</p>
          </div>
        </section>
      </main>

      <!-- 頁尾：10% 高，固定底部、最上層 -->
      <footer class="app-footer">
        <button class="tab-btn active" data-tab="home" aria-label="首頁">
          <div class="tab-icon" aria-hidden="true">
            <!-- Home -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 10l9-7 9 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M5 10v8h14v-8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </div>
          <div class="tab-label">首頁</div>
        </button>
        <button class="tab-btn" data-tab="checkin" aria-label="打卡">
          <div class="tab-icon" aria-hidden="true">
            <!-- Clock -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" />
              <path d="M12 7v5l3 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </div>
          <div class="tab-label">打卡</div>
        </button>
        <button class="tab-btn" data-tab="leader" aria-label="幹部">
          <div class="tab-icon" aria-hidden="true">
            <!-- Map pin -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 21s7-7 7-11a7 7 0 10-14 0c0 4 7 11 7 11z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <circle cx="12" cy="10" r="2.5" stroke="currentColor" stroke-width="2" />
            </svg>
          </div>
          <div class="tab-label">幹部</div>
        </button>
        <button class="tab-btn" data-tab="manage" aria-label="管理">
          <div class="tab-icon" aria-hidden="true">
            <!-- Dashboard -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="3" y="3" width="8" height="7" rx="1.5" stroke="currentColor" stroke-width="2" />
              <rect x="13" y="3" width="8" height="11" rx="1.5" stroke="currentColor" stroke-width="2" />
              <rect x="3" y="12" width="8" height="9" rx="1.5" stroke="currentColor" stroke-width="2" />
            </svg>
          </div>
          <div class="tab-label">管理</div>
        </button>
        <button class="tab-btn" data-tab="feature" aria-label="功能">
          <div class="tab-icon" aria-hidden="true">
            <!-- Tools -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7 7l10 10M14 4l6 6M4 14l6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </div>
          <div class="tab-label">功能</div>
        </button>
        <button class="tab-btn" data-tab="settings" aria-label="設定">
          <div class="tab-icon" aria-hidden="true">
            <!-- Gear (簡化) -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" />
              <path d="M12 3v3M12 18v3M3 12h3M18 12h3M5.5 5.5l2.1 2.1M16.4 16.4l2.1 2.1M18.5 5.5l-2.1 2.1M7.6 16.4l-2.1 2.1" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </div>
          <div class="tab-label">設定</div>
        </button>
      </footer>
    </div>

    <script type="module" src="app.js"></script>
  </body>
  </html>